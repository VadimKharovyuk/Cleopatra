## ??????? ????????? ?????????
#server.address=0.0.0.0
#server.port=${PORT:10000}
#app.base-url=${APP_BASE_URL:https://cleopatra-brcc.onrender.com}
#
## ??????????? ????????? Tomcat
#server.tomcat.max-threads=10
#server.tomcat.max-connections=50
#
## ???????????? ???? ?????? PostgreSQL
#spring.datasource.driver-class-name=org.postgresql.Driver
#spring.datasource.url=${DATABASE_URL}
#spring.datasource.username=${DATABASE_USERNAME}
#spring.datasource.password=${DATABASE_PASSWORD}
#
## ??????? JPA ????????? (??????? ??? ??????)
#spring.jpa.hibernate.ddl-auto=update
#spring.jpa.database=POSTGRESQL
#spring.jpa.show-sql=false
#spring.jpa.open-in-view=false
#
## ???????????? ????????? ??? PostgreSQL
#spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
#spring.jpa.properties.hibernate.boot.allow_jdbc_metadata_access=false
#
## ?????????? ????????? HikariCP
#spring.datasource.hikari.maximum-pool-size=2
#spring.datasource.hikari.minimum-idle=1
#spring.datasource.hikari.connection-timeout=30000
#spring.datasource.hikari.idle-timeout=600000
#
## ????????? ??? ??????
#spring.jmx.enabled=false
#spring.main.banner-mode=off
#
## ??????? ???????
#cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
#cloudinary.api-key=${CLOUDINARY_API_KEY}
#cloudinary.api-secret=${CLOUDINARY_API_SECRET}
#security.rememberme.key=${SECURITY_REMEMBERME_KEY}
#translation.api.key=${TRANSLATION_API_KEY}
#app.name=${APP_NAME:Cleopatra}
#mapbox.access.token=${MAPBOX_ACCESS_TOKEN}
#gemini.api.key=${GEMINI_API_KEY}
#gemini.api.base-url=${GEMINI_API_BASE_URL:https://generativelanguage.googleapis.com/v1beta/models}
#gemini.api.model=${GEMINI_API_MODEL:gemini-2.0-flash}
#gemini.api.action=${GEMINI_API_ACTION:generateContent}
#
## Email ?????????
#spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
#spring.mail.port=${SPRING_MAIL_PORT:587}
#spring.mail.username=${SPRING_MAIL_USERNAME}
#spring.mail.password=${SPRING_MAIL_PASSWORD}
#spring.mail.properties.mail.smtp.auth=true
#spring.mail.properties.mail.smtp.starttls.enable=true
#
## ??????????? ???????????
#logging.level.root=WARN
#logging.level.org.springframework=WARN
#logging.level.org.hibernate=WARN
#
## ??????????
#management.endpoints.enabled-by-default=false
#management.endpoint.health.enabled=true
#
## ?????????????? ???????? ?????? ??? ?????
#spring.task.execution.pool.core-size=1
#spring.task.execution.pool.max-size=2
#
## ???????? ?????? Spring Boot
#spring.jpa.properties.hibernate.cache.use_second_level_cache=false
#spring.jpa.properties.hibernate.cache.use_query_cache=false
#spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.internal.NoCachingRegionFactory
#spring.jpa.properties.hibernate.bytecode.use_reflection_optimizer=false
#spring.output.ansi.enabled=never
#spring.jpa.defer-datasource-initialization=true
#spring.jpa.properties.hibernate.order_inserts=true
#spring.jpa.properties.hibernate.order_updates=true
#spring.jpa.properties.hibernate.batch_versioned_data=true
#spring.main.lazy-initialization=true
#
## ??????????? ?????????? (?????? JMX)
#spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
#spring.main.web-application-type=servlet
#spring.devtools.restart.enabled=false
#spring.devtools.livereload.enabled=false
#server.compression.enabled=true
#server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
#logging.pattern.console=%d{HH:mm:ss} %-5level %logger{36} - %msg%n
#management.metrics.enabled=false
#management.health.defaults.enabled=false
#management.info.env.enabled=false


# =============================================================================
# ????????? ????????? - ??????????? ??? RENDER STARTER
# =============================================================================
server.address=0.0.0.0
server.port=${PORT:10000}
app.base-url=${APP_BASE_URL:https://cleopatra-brcc.onrender.com}

# ??????????? Tomcat ??? ????? ????????
server.tomcat.threads.min-spare=1
server.tomcat.threads.max=8
server.tomcat.max-connections=40
server.tomcat.accept-count=10
server.tomcat.connection-timeout=20000
server.tomcat.keep-alive-timeout=30000
server.tomcat.max-keep-alive-requests=50

# ?????? ??????? ??? ???????? bandwidth
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml
server.compression.min-response-size=1024

# =============================================================================
# ???? ?????? POSTGRESQL + HIKARICP ???????????
# =============================================================================
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}

# ????????? ????????? HikariCP ??? Starter ?????
spring.datasource.hikari.maximum-pool-size=2
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.pool-name=CleopatraCP

# =============================================================================
# JPA/HIBERNATE ??????????? ??? ??????????????????
# =============================================================================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database=POSTGRESQL
spring.jpa.show-sql=false
spring.jpa.open-in-view=false
spring.jpa.defer-datasource-initialization=false

# ??????????? ????????? PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.boot.allow_jdbc_metadata_access=false

# ????????? batch ????????? ??? ??????????????????
spring.jpa.properties.hibernate.jdbc.batch_size=15
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.batch_versioned_data=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# ?????????? ??????????? ??? ???????? ??????
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.internal.NoCachingRegionFactory

# ?????????????? ??????????? Hibernate
spring.jpa.properties.hibernate.bytecode.use_reflection_optimizer=false
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true
spring.jpa.properties.hibernate.query.plan_cache_max_size=64
spring.jpa.properties.hibernate.query.plan_parameter_metadata_max_size=32

# =============================================================================
# SPRING BOOT ??????????? ?????? ? ??????????????????
# =============================================================================

# ??????? ????????????? ? ??????????? ??????
spring.main.lazy-initialization=true
spring.main.banner-mode=off
spring.main.web-application-type=servlet

# ?????????? ???????? ???????????
spring.jmx.enabled=false
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false
spring.output.ansi.enabled=never

# ?????????? ???????? ????????????????
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
  org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\
  org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration

# =============================================================================
# THREAD POOL ???????????
# =============================================================================
spring.task.execution.pool.core-size=1
spring.task.execution.pool.max-size=3
spring.task.execution.pool.queue-capacity=25
spring.task.execution.pool.keep-alive=30s
spring.task.execution.thread-name-prefix=cleopatra-

spring.task.scheduling.pool.size=1
spring.task.scheduling.thread-name-prefix=cleopatra-scheduler-

# =============================================================================
# ??????????? - ??????????? ???????
# =============================================================================
logging.level.root=WARN
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN

# ?????????? ??????? ???????????
logging.pattern.console=%d{HH:mm:ss.SSS} %5p [%t] %c{1} - %m%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} %5p [%t] %c{1} - %m%n

# =============================================================================
# SPRING ACTUATOR - ??????????? ????????????
# =============================================================================
management.endpoints.enabled-by-default=false
management.endpoint.health.enabled=true
management.endpoint.info.enabled=false
management.endpoint.metrics.enabled=false
management.metrics.enabled=false
management.health.defaults.enabled=false
management.info.env.enabled=false
management.endpoint.health.cache.time-to-live=30s
management.endpoint.health.show-details=never

# =============================================================================
# ??????? ??????? - ?????????? ?????????
# =============================================================================

# Cloudinary ?????????
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# Security ?????????
security.rememberme.key=${SECURITY_REMEMBERME_KEY}

# ?????????? API
translation.api.key=${TRANSLATION_API_KEY}

# ???????? ????????? ??????????
app.name=${APP_NAME:Cleopatra}

# Mapbox ?????????
mapbox.access.token=${MAPBOX_ACCESS_TOKEN}

# Gemini AI ?????????
gemini.api.key=${GEMINI_API_KEY}
gemini.api.base-url=${GEMINI_API_BASE_URL:https://generativelanguage.googleapis.com/v1beta/models}
gemini.api.model=${GEMINI_API_MODEL:gemini-2.0-flash}
gemini.api.action=${GEMINI_API_ACTION:generateContent}

# =============================================================================
# EMAIL ????????????
# =============================================================================
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000

# =============================================================================
# ?????????????? ???????????
# =============================================================================

# Jackson ???????????
spring.jackson.serialization.write-dates-as-timestamps=true
spring.jackson.serialization.write-durations-as-timestamps=true
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# HTTP ??????? ???????????
spring.http.multipart.max-file-size=10MB
spring.http.multipart.max-request-size=10MB

# Security ??????????? (???? ????????????)
spring.security.sessions.creation-policy=if_required
spring.security.sessions.maximum-sessions=2

# ??????? ??? ??????????
spring.profiles.active=${SPRING_PROFILES_ACTIVE:prod}

<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ะคะพััะผ ะฐััะธััะพะฒ</title>
</head>
<body>
<header>
  <h1>๐ญ ะคะพััะผ ะฐััะธััะพะฒ</h1>
  <nav>
    <a th:href="@{/forums/create}">๐ ะกะพะทะดะฐัั ัะตะผั</a>
    <a th:href="@{/profile}">๐ค ะัะพัะธะปั</a>
    <a th:href="@{/logout}">๐ช ะััะพะด</a>
  </nav>
</header>

<main>
  <!-- ะะพะธัะบ -->
  <section>
    <form th:action="@{/forums/search}" method="get">
      <input type="text" name="query" placeholder="ะะพะธัะบ ะฟะพ ัะตะผะฐะผ..." required>
      <button type="submit">๐ ะะฐะนัะธ</button>
    </form>
  </section>

  <!-- ะคะธะปัััั -->
  <section>
    <h3>ะะฐัะตะณะพัะธะธ:</h3>
    <a th:href="@{/forums}">ะัะต</a>
    <a th:each="type : ${forumTypes}"
       th:href="@{/forums(forumType=${type})}"
       th:text="${type.emoji + ' ' + type.displayName}"
       th:classappend="${type == currentType} ? 'active' : ''">
    </a>
  </section>

  <!-- ะกะพััะธัะพะฒะบะฐ -->
  <section>
    <span>ะกะพััะธัะพะฒะบะฐ:</span>
    <a th:href="@{/forums(sortBy='createdAt', sortDirection='DESC')}">๐ ะะพ ะดะฐัะต (ะฝะพะฒัะต)</a>
    <a th:href="@{/forums(sortBy='createdAt', sortDirection='ASC')}">๐ ะะพ ะดะฐัะต (ััะฐััะต)</a>
    <a th:href="@{/forums(sortBy='viewCount', sortDirection='DESC')}">๐๏ธ ะะพ ะฟัะพัะผะพััะฐะผ</a>
    <a th:href="@{/forums(sortBy='commentCount', sortDirection='DESC')}">๐ฌ ะะพ ะบะพะผะผะตะฝัะฐัะธัะผ</a>
  </section>

  <!-- ะกะฟะธัะพะบ ัะตะผ -->
  <section>
    <div th:if="${forums.content.empty}">
      <p>ะขะตะผ ะฟะพะบะฐ ะฝะตั. <a th:href="@{/forums/create}">ะกะพะทะดะฐะนัะต ะฟะตัะฒัั!</a></p>
    </div>

    <article th:each="forum : ${forums.content}">
      <header>
        <h2>
          <a th:href="@{/forums/{id}(id=${forum.id})}" th:text="${forum.getTitle()}"></a>
        </h2>
        <div>
          <span th:text="${forum.forumType.emoji + ' ' + forum.forumType.displayName}"></span>
        </div>
      </header>

      <footer>
        <div>
          <span>๐ค <span th:text="${forum.authorName}"></span></span>
          <span>๐ <span th:text="${#temporals.format(forum.createdAt, 'dd.MM.yyyy HH:mm')}"></span></span>
          <span>๐๏ธ <span th:text="${forum.viewCount}"></span></span>
          <span>๐ฌ <span th:text="${forum.commentCount}"></span></span>
        </div>
      </footer>
    </article>
  </section>

  <!-- ะะฐะณะธะฝะฐัะธั -->
  <nav th:if="${forums.totalPages > 1}">
    <a th:if="${forums.hasPrevious}"
       th:href="@{/forums(page=${forums.page - 1}, size=${forums.size}, forumType=${currentType})}">
      โฌ๏ธ ะัะตะดัะดััะฐั
    </a>

    <span th:text="'ะกััะฐะฝะธัะฐ ' + ${forums.page + 1} + ' ะธะท ' + ${forums.totalPages}"></span>

    <a th:if="${forums.hasNext}"
       th:href="@{/forums(page=${forums.page + 1}, size=${forums.size}, forumType=${currentType})}">
      ะกะปะตะดัััะฐั โก๏ธ
    </a>
  </nav>
</main>

<!-- ะกะพะพะฑัะตะฝะธั -->
<div th:if="${successMessage}" th:text="${successMessage}"></div>
<div th:if="${errorMessage}" th:text="${errorMessage}"></div>
</body>
</html>
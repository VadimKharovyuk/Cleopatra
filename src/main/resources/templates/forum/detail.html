<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–§–æ—Ä—É–º</title>
</head>
<body>
<header>
    <nav>
        <a th:href="@{/forums}">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
        <a th:href="@{/forums/create}">üìù –°–æ–∑–¥–∞—Ç—å —Ç–µ–º—É</a>
    </nav>
</header>

<main>
    <!-- ‚úÖ –î–û–ë–ê–í–õ–ï–ù–ê –ó–ê–©–ò–¢–ê –û–¢ NULL -->
    <div th:if="${forum != null}">
        <article>
            <header>
                <h1 th:text="${forum.title}">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–º—ã</h1>
                <div>
                    <span th:text="${forum.forumType.emoji + ' ' + forum.forumType.displayName}">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                </div>

                <div>
                    <span>üë§ <span th:text="${forum.authorName}">–ê–≤—Ç–æ—Ä</span></span>
                    <span>üïí <span th:text="${#temporals.format(forum.createdAt, 'dd.MM.yyyy HH:mm')}">–î–∞—Ç–∞</span></span>
                    <span>üëÅÔ∏è <span th:text="${forum.viewCount}">0</span></span>
                    <span>üí¨ <span th:text="${forum.commentCount}">0</span></span>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏–ª–∏ –∞–¥–º–∏–Ω–∞ -->
                <div th:if="${isOwner or isAdmin}">
                    <form th:action="@{/forums/{id}/delete(id=${forum.id})}" method="post"
                          onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ç–µ–º—É?')">
                        <button type="submit">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Ç–µ–º—É</button>
                    </form>
                </div>
            </header>

            <section>
                <p th:text="${forum.description}" style="white-space: pre-line;">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–º—ã</p>
            </section>

            <footer>
                <p th:if="${forum.updatedAt != null and !forum.updatedAt.equals(forum.createdAt)}">
                    ‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–æ: <span th:text="${#temporals.format(forum.updatedAt, 'dd.MM.yyyy HH:mm')}">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</span>
                </p>
            </footer>
        </article>

        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –±—É–¥—É—â–µ–º -->
        <section>
            <h3>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
            <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è...</p>
        </section>
    </div>

    <!-- ‚úÖ –°–û–û–ë–©–ï–ù–ò–ï –ï–°–õ–ò FORUM NULL -->
    <div th:if="${forum == null}">
        <h1>‚ùå –¢–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h1>
        <p>–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Ç–µ–º–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞.</p>
        <a th:href="@{/forums}">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Ç–µ–º</a>
    </div>
</main>

<!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö -->
<div th:if="${successMessage}" th:text="${successMessage}" style="color: green; padding: 10px;"></div>
<div th:if="${errorMessage}" th:text="${errorMessage}" style="color: red; padding: 10px;"></div>

<!-- ‚úÖ –û–¢–õ–ê–î–û–ß–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø (—É–¥–∞–ª–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ) -->
<div style="background: #f0f0f0; padding: 10px; margin: 10px 0;">
    <h4>üîç Debug Info:</h4>
    <p>Forum object: <span th:text="${forum}">null</span></p>
    <p>Forum != null: <span th:text="${forum != null}">false</span></p>
    <p>Error message: <span th:text="${errorMessage}">none</span></p>
</div>

</body>
</html>
<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</title>

</head>
<body>
<main>
  <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ -->
  <div th:if="${successMessage}" class="alert alert-success">
    <p th:text="${successMessage}"></p>
  </div>

  <div th:if="${errorMessage}" class="alert alert-error">
    <p th:text="${errorMessage}"></p>
  </div>

  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <div class="stats-container">
    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫</h3>
    <p>–í—Å–µ–≥–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <strong th:text="${blockedUsersPage.blockedUsersCount}">0</strong></p>
  </div>

  <!-- –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
  <div th:if="${#lists.isEmpty(blockedUsersPage.blockedUsers)}" class="empty-state">
    <div class="empty-content">
      <i class="fas fa-users-slash fa-4x"></i>
      <h2>–£ –≤–∞—Å –Ω–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
      <p>–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ø–æ–∏—Å–∫–µ.</p>
      <a href="/blocks/search" class="btn-luxury btn-primary-luxury">
        <i class="fas fa-search"></i>
        –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      </a>
    </div>
  </div>

  <div th:unless="${#lists.isEmpty(blockedUsersPage.blockedUsers)}" class="blocked-users-container">
    <h2>–°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>

    <div class="users-grid">
      <div th:each="blockedUser : ${blockedUsersPage.blockedUsers}" class="user-card">
        <!-- –§–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div class="user-avatar">
          <img th:if="${blockedUser.imageUrl}"
               th:src="${blockedUser.imageUrl}"
               alt="–§–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
               class="avatar-img">
          <div th:unless="${blockedUser.imageUrl}" class="avatar-placeholder">
            <span th:text="${#strings.substring(blockedUser.firstName,0,1) + #strings.substring(blockedUser.lastName,0,1)}">AB</span>
          </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
        <div class="user-info">
          <h3 class="user-name" th:text="${blockedUser.firstName + ' ' + blockedUser.lastName}">–ò–º—è –§–∞–º–∏–ª–∏—è</h3>
          <p class="user-email" th:text="${blockedUser.email}">email@example.com</p>

          <div class="user-details">
            <div class="detail-item">
              <i class="fas fa-map-marker-alt"></i>
              <span th:text="${blockedUser.city ?: '–ì–æ—Ä–æ–¥ –Ω–µ —É–∫–∞–∑–∞–Ω'}">–ì–æ—Ä–æ–¥</span>
            </div>

            <div class="detail-item">
              <i class="fas fa-calendar"></i>
              <span>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: <span th:text="${#temporals.format(blockedUser.blockedAt, 'dd.MM.yyyy HH:mm')}">–¥–∞—Ç–∞</span></span>
            </div>

            <div class="detail-item">
              <i class="fas fa-users"></i>
              <span th:text="${blockedUser.followersCount + ' –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤'}">0 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</span>
            </div>
          </div>

          <!-- –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω -->
          <div class="online-status">
            <div th:if="${blockedUser.isOnline}" class="status online">
              <i class="fas fa-circle"></i>
              <span>–û–Ω–ª–∞–π–Ω</span>
            </div>
            <div th:unless="${blockedUser.isOnline}" class="status offline">
              <i class="far fa-circle"></i>
              <span>–ë—ã–ª –≤ —Å–µ—Ç–∏: <span th:text="${#temporals.format(blockedUser.lastSeen, 'dd.MM.yyyy HH:mm')}">–¥–∞—Ç–∞</span></span>
            </div>
          </div>
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
        <div class="user-actions">
          <a th:href="@{/profile/{userId}(userId=${blockedUser.userId})}"
             class="btn-luxury btn-outline-luxury">
            <i class="fas fa-user"></i>
            –ü—Ä–æ—Ñ–∏–ª—å
          </a>

          <a href="#"
             class="btn-luxury btn-success-luxury"
             data-action="unblock"
             th:data-user-id="${blockedUser.userId}"
             th:data-user-name="${blockedUser.firstName + ' ' + blockedUser.lastName}">
            <i class="fas fa-unlock"></i>
            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
          </a>
        </div>
      </div>
    </div>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    <div th:if="${blockedUsersPage.totalPages > 1}" class="pagination-container">
      <nav class="pagination">
        <!-- –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <a th:if="${blockedUsersPage.hasPrevious}"
           th:href="@{/blocks(page=${blockedUsersPage.currentPage - 1}, size=${blockedUsersPage.pageSize})}"
           class="pagination-btn">
          <i class="fas fa-chevron-left"></i>
          –ü—Ä–µ–¥—ã–¥—É—â–∞—è
        </a>

        <!-- –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü -->
        <div class="page-numbers">
                        <span th:each="i : ${#numbers.sequence(0, blockedUsersPage.totalPages - 1)}">
                            <a th:if="${i != blockedUsersPage.currentPage}"
                               th:href="@{/blocks(page=${i}, size=${blockedUsersPage.pageSize})}"
                               th:text="${i + 1}"
                               class="page-number">
                            </a>
                            <span th:if="${i == blockedUsersPage.currentPage}"
                                  th:text="${i + 1}"
                                  class="page-number active">
                            </span>
                        </span>
        </div>

        <!-- –°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <a th:if="${blockedUsersPage.hasNext}"
           th:href="@{/blocks(page=${blockedUsersPage.currentPage + 1}, size=${blockedUsersPage.pageSize})}"
           class="pagination-btn">
          –°–ª–µ–¥—É—é—â–∞—è
          <i class="fas fa-chevron-right"></i>
        </a>
      </nav>

      <div class="pagination-info">
        <p>
          –°—Ç—Ä–∞–Ω–∏—Ü–∞ <span th:text="${blockedUsersPage.currentPage + 1}">1</span>
          –∏–∑ <span th:text="${blockedUsersPage.totalPages}">1</span>
          (–í—Å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: <span th:text="${blockedUsersPage.totalElements}">0</span>)
        </p>
      </div>
    </div>
  </div>
</main>

<!-- JavaScript -->
<script th:src="@{/js/profile/lock-user.js}"></script>

</body>
</html>
<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–∞</title>
</head>
<body>
<div>
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ -->
    <div th:if="${successMessage}" style="color: green; margin-bottom: 15px; padding: 10px; border: 1px solid green; background-color: #f0fff0;">
        <p th:text="${successMessage}"></p>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div style="margin-bottom: 20px;">
        <a href="/">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a> |
        <a href="/posts/create">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</a>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å—Ç–µ -->
    <div th:if="${post}" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px;">

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞ -->
        <h1>–ü–æ—Å—Ç #<span th:text="${post.id}"></span></h1>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ—Ä–µ -->
        <div style="margin-bottom: 15px; padding: 10px; background-color: #f9f9f9; border-left: 4px solid #007bff;">
            <h3>–ê–≤—Ç–æ—Ä:</h3>
            <p>
                <strong th:text="${post.author.firstName + ' ' + post.author.lastName}"></strong>
            </p>

            <!-- –ê–≤–∞—Ç–∞—Ä –∞–≤—Ç–æ—Ä–∞ -->
            <div th:if="${post.author.imageUrl}">
                <img th:src="${post.author.imageUrl}"
                     th:alt="${post.author.firstName}"
                     style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
            </div>
            <div th:unless="${post.author.imageUrl}">
                <div style="width: 50px; height: 50px; border-radius: 50%; background-color: #ccc; display: flex; align-items: center; justify-content: center;">
                    <span th:text="${#strings.substring(post.author.firstName, 0, 1) + #strings.substring(post.author.lastName, 0, 1)}"></span>
                </div>
            </div>
        </div>

        <!-- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è -->
        <div style="margin-bottom: 15px; color: #666; font-size: 14px;">
            <p>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: <span th:text="${#temporals.format(post.createdAt, 'dd.MM.yyyy HH:mm')}"></span></p>
        </div>

        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ -->
        <div th:if="${post.imageUrl}" style="margin-bottom: 20px; text-align: center;">
            <img th:src="${post.imageUrl}"
                 alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞"
                 style="max-width: 100%; max-height: 500px; border: 1px solid #ddd;">
        </div>

        <!-- –¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞ -->
        <div style="margin-bottom: 20px;">
            <h3>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:</h3>
            <div style="padding: 15px; background-color: #f8f9fa; border-radius: 5px; white-space: pre-wrap;" th:text="${post.content}"></div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å—Ç–∞ -->
        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee;">
            <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h4>
            <div style="display: flex; gap: 20px;">
                <span>üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: <strong th:text="${post.viewsCount}"></strong></span>
                <span>‚ù§Ô∏è –õ–∞–π–∫–∏: <strong th:text="${post.likesCount}"></strong></span>
                <span>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: <strong th:text="${post.commentsCount}"></strong></span>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee;">
            <button onclick="likePost()" style="margin-right: 10px;">‚ù§Ô∏è –õ–∞–π–∫</button>
            <button onclick="sharePost()" style="margin-right: 10px;">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            <button onclick="showComments()">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</button>
        </div>
    </div>

    <!-- –ï—Å–ª–∏ –ø–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω -->
    <div th:unless="${post}" style="text-align: center; padding: 40px;">
        <h2>–ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</h2>
        <p>–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –ø–æ—Å—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª —É–¥–∞–ª–µ–Ω.</p>
        <a href="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–∑–∞–≥–ª—É—à–∫–∞) -->
    <div id="commentsSection" style="display: none; margin-top: 30px; border: 1px solid #ddd; padding: 20px;">
        <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
        <p>–§—É–Ω–∫—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–∑–∂–µ</p>

        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
        <div style="margin-top: 15px;">
            <textarea placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." rows="3" style="width: 100%; margin-bottom: 10px;"></textarea>
            <button>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
        </div>
    </div>
</div>

<script>
    function likePost() {
        // TODO: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–∞–π–∫ –ø–æ—Å—Ç–∞
        alert('–§—É–Ω–∫—Ü–∏—è –ª–∞–π–∫–æ–≤ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–∑–∂–µ');
    }

    function sharePost() {
        // –ö–æ–ø–∏—Ä—É–µ–º URL –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        navigator.clipboard.writeText(window.location.href).then(() => {
            alert('–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
        });
    }

    function showComments() {
        const commentsSection = document.getElementById('commentsSection');
        if (commentsSection.style.display === 'none') {
            commentsSection.style.display = 'block';
        } else {
            commentsSection.style.display = 'none';
        }
    }
</script>
</body>
</html>
<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html lang="ru" xmlns:th="http://www.thymeleaf.org">&ndash;&gt;-->
<!--&lt;!&ndash;<head>&ndash;&gt;-->
<!--&lt;!&ndash;  <meta charset="UTF-8">&ndash;&gt;-->
<!--&lt;!&ndash;  <meta name="viewport" content="width=device-width, initial-scale=1.0">&ndash;&gt;-->
<!--&lt;!&ndash;  <title th:text="${pageTitle}">Результаты тестирования - Cleopatra</title>&ndash;&gt;-->
<!--&lt;!&ndash;  <style>&ndash;&gt;-->
<!--&lt;!&ndash;    * {&ndash;&gt;-->
<!--&lt;!&ndash;      margin: 0;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 0;&ndash;&gt;-->
<!--&lt;!&ndash;      box-sizing: border-box;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    body {&ndash;&gt;-->
<!--&lt;!&ndash;      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;&ndash;&gt;-->
<!--&lt;!&ndash;      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&ndash;&gt;-->
<!--&lt;!&ndash;      min-height: 100vh;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 20px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .container {&ndash;&gt;-->
<!--&lt;!&ndash;      max-width: 1400px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin: 0 auto;&ndash;&gt;-->
<!--&lt;!&ndash;      background: white;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 15px;&ndash;&gt;-->
<!--&lt;!&ndash;      box-shadow: 0 10px 30px rgba(0,0,0,0.1);&ndash;&gt;-->
<!--&lt;!&ndash;      overflow: hidden;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .header {&ndash;&gt;-->
<!--&lt;!&ndash;      background: linear-gradient(45deg, #e74c3c, #c0392b);&ndash;&gt;-->
<!--&lt;!&ndash;      color: white;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 30px;&ndash;&gt;-->
<!--&lt;!&ndash;      text-align: center;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .header h1 {&ndash;&gt;-->
<!--&lt;!&ndash;      font-size: 2.5em;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .nav-links {&ndash;&gt;-->
<!--&lt;!&ndash;      background: rgba(255,255,255,0.1);&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 15px;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-top: 15px;&ndash;&gt;-->
<!--&lt;!&ndash;      text-align: center;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .nav-links a {&ndash;&gt;-->
<!--&lt;!&ndash;      color: white;&ndash;&gt;-->
<!--&lt;!&ndash;      text-decoration: none;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 8px 16px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin: 0 5px;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 5px;&ndash;&gt;-->
<!--&lt;!&ndash;      background: rgba(255,255,255,0.2);&ndash;&gt;-->
<!--&lt;!&ndash;      transition: background 0.3s;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .nav-links a:hover {&ndash;&gt;-->
<!--&lt;!&ndash;      background: rgba(255,255,255,0.3);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .content {&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 30px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .results-section {&ndash;&gt;-->
<!--&lt;!&ndash;      background: #f8f9fa;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 25px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 25px;&ndash;&gt;-->
<!--&lt;!&ndash;      border-left: 5px solid #e74c3c;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .results-grid {&ndash;&gt;-->
<!--&lt;!&ndash;      display: grid;&ndash;&gt;-->
<!--&lt;!&ndash;      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));&ndash;&gt;-->
<!--&lt;!&ndash;      gap: 20px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 30px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .result-card {&ndash;&gt;-->
<!--&lt;!&ndash;      background: white;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 20px;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      box-shadow: 0 2px 10px rgba(0,0,0,0.1);&ndash;&gt;-->
<!--&lt;!&ndash;      border-left: 4px solid #e74c3c;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .result-card h3 {&ndash;&gt;-->
<!--&lt;!&ndash;      color: #2c3e50;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 15px;&ndash;&gt;-->
<!--&lt;!&ndash;      font-size: 1.2em;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .metric {&ndash;&gt;-->
<!--&lt;!&ndash;      display: flex;&ndash;&gt;-->
<!--&lt;!&ndash;      justify-content: space-between;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 8px 0;&ndash;&gt;-->
<!--&lt;!&ndash;      border-bottom: 1px solid #ecf0f1;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .metric:last-child {&ndash;&gt;-->
<!--&lt;!&ndash;      border-bottom: none;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .metric-label {&ndash;&gt;-->
<!--&lt;!&ndash;      color: #7f8c8d;&ndash;&gt;-->
<!--&lt;!&ndash;      font-weight: 500;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .metric-value {&ndash;&gt;-->
<!--&lt;!&ndash;      color: #2c3e50;&ndash;&gt;-->
<!--&lt;!&ndash;      font-weight: 600;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .metric-value.success {&ndash;&gt;-->
<!--&lt;!&ndash;      color: #27ae60;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .metric-value.warning {&ndash;&gt;-->
<!--&lt;!&ndash;      color: #f39c12;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .metric-value.danger {&ndash;&gt;-->
<!--&lt;!&ndash;      color: #e74c3c;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .btn {&ndash;&gt;-->
<!--&lt;!&ndash;      background: linear-gradient(45deg, #e74c3c, #c0392b);&ndash;&gt;-->
<!--&lt;!&ndash;      color: white;&ndash;&gt;-->
<!--&lt;!&ndash;      border: none;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 12px 25px;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 8px;&ndash;&gt;-->
<!--&lt;!&ndash;      cursor: pointer;&ndash;&gt;-->
<!--&lt;!&ndash;      font-size: 14px;&ndash;&gt;-->
<!--&lt;!&ndash;      font-weight: 600;&ndash;&gt;-->
<!--&lt;!&ndash;      transition: all 0.3s;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-right: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-bottom: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .btn:hover {&ndash;&gt;-->
<!--&lt;!&ndash;      transform: translateY(-2px);&ndash;&gt;-->
<!--&lt;!&ndash;      box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .btn-primary {&ndash;&gt;-->
<!--&lt;!&ndash;      background: linear-gradient(45deg, #3498db, #2980b9);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .btn-success {&ndash;&gt;-->
<!--&lt;!&ndash;      background: linear-gradient(45deg, #27ae60, #219a52);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .btn-warning {&ndash;&gt;-->
<!--&lt;!&ndash;      background: linear-gradient(45deg, #f39c12, #e67e22);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .results-table {&ndash;&gt;-->
<!--&lt;!&ndash;      width: 100%;&ndash;&gt;-->
<!--&lt;!&ndash;      border-collapse: collapse;&ndash;&gt;-->
<!--&lt;!&ndash;      margin-top: 20px;&ndash;&gt;-->
<!--&lt;!&ndash;      background: white;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      overflow: hidden;&ndash;&gt;-->
<!--&lt;!&ndash;      box-shadow: 0 2px 10px rgba(0,0,0,0.1);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .results-table th,&ndash;&gt;-->
<!--&lt;!&ndash;    .results-table td {&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 12px 15px;&ndash;&gt;-->
<!--&lt;!&ndash;      text-align: left;&ndash;&gt;-->
<!--&lt;!&ndash;      border-bottom: 1px solid #ecf0f1;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .results-table th {&ndash;&gt;-->
<!--&lt;!&ndash;      background: #34495e;&ndash;&gt;-->
<!--&lt;!&ndash;      color: white;&ndash;&gt;-->
<!--&lt;!&ndash;      font-weight: 600;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .results-table tr:hover {&ndash;&gt;-->
<!--&lt;!&ndash;      background: #f8f9fa;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .chart-container {&ndash;&gt;-->
<!--&lt;!&ndash;      background: white;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 10px;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 20px;&ndash;&gt;-->
<!--&lt;!&ndash;      margin: 20px 0;&ndash;&gt;-->
<!--&lt;!&ndash;      box-shadow: 0 2px 10px rgba(0,0,0,0.1);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .loading {&ndash;&gt;-->
<!--&lt;!&ndash;      display: none;&ndash;&gt;-->
<!--&lt;!&ndash;      text-align: center;&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 40px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .spinner {&ndash;&gt;-->
<!--&lt;!&ndash;      border: 4px solid #f3f3f3;&ndash;&gt;-->
<!--&lt;!&ndash;      border-top: 4px solid #e74c3c;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 50%;&ndash;&gt;-->
<!--&lt;!&ndash;      width: 50px;&ndash;&gt;-->
<!--&lt;!&ndash;      height: 50px;&ndash;&gt;-->
<!--&lt;!&ndash;      animation: spin 1s linear infinite;&ndash;&gt;-->
<!--&lt;!&ndash;      margin: 0 auto 20px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    @keyframes spin {&ndash;&gt;-->
<!--&lt;!&ndash;      0% { transform: rotate(0deg); }&ndash;&gt;-->
<!--&lt;!&ndash;      100% { transform: rotate(360deg); }&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .status-badge {&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 4px 12px;&ndash;&gt;-->
<!--&lt;!&ndash;      border-radius: 15px;&ndash;&gt;-->
<!--&lt;!&ndash;      font-size: 12px;&ndash;&gt;-->
<!--&lt;!&ndash;      font-weight: 600;&ndash;&gt;-->
<!--&lt;!&ndash;      text-transform: uppercase;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .status-running {&ndash;&gt;-->
<!--&lt;!&ndash;      background: #fff3cd;&ndash;&gt;-->
<!--&lt;!&ndash;      color: #856404;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .status-completed {&ndash;&gt;-->
<!--&lt;!&ndash;      background: #d4edda;&ndash;&gt;-->
<!--&lt;!&ndash;      color: #155724;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .status-failed {&ndash;&gt;-->
<!--&lt;!&ndash;      background: #f8d7da;&ndash;&gt;-->
<!--&lt;!&ndash;      color: #721c24;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    .refresh-controls {&ndash;&gt;-->
<!--&lt;!&ndash;      text-align: center;&ndash;&gt;-->
<!--&lt;!&ndash;      margin: 20px 0;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  </style>&ndash;&gt;-->
<!--&lt;!&ndash;</head>&ndash;&gt;-->
<!--&lt;!&ndash;<body>&ndash;&gt;-->
<!--&lt;!&ndash;<div class="container">&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="header">&ndash;&gt;-->
<!--&lt;!&ndash;    <h1>📊 Результаты тестирования</h1>&ndash;&gt;-->
<!--&lt;!&ndash;    <p>Анализ производительности и нагрузочного тестирования</p>&ndash;&gt;-->

<!--&lt;!&ndash;    <div class="nav-links">&ndash;&gt;-->
<!--&lt;!&ndash;      <a href="/diagnostic/load-test">🧪 Тестирование</a>&ndash;&gt;-->
<!--&lt;!&ndash;      <a href="/diagnostic/load-test/results">📊 Результаты</a>&ndash;&gt;-->
<!--&lt;!&ndash;      <a href="/diagnostic/system-monitor">💻 Мониторинг</a>&ndash;&gt;-->
<!--&lt;!&ndash;      <a href="/diagnostic/memory">🧠 Память</a>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  <div class="content">&ndash;&gt;-->
<!--&lt;!&ndash;    &lt;!&ndash; Управление обновлением &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="refresh-controls">&ndash;&gt;-->
<!--&lt;!&ndash;      <button class="btn btn-primary" onclick="loadLatestResults()">🔄 Загрузить последние результаты</button>&ndash;&gt;-->
<!--&lt;!&ndash;      <button class="btn btn-success" onclick="startAutoRefresh()">⏰ Авто-обновление</button>&ndash;&gt;-->
<!--&lt;!&ndash;      <button class="btn btn-warning" onclick="stopAutoRefresh()">⏸️ Остановить обновление</button>&ndash;&gt;-->
<!--&lt;!&ndash;      <button class="btn" onclick="clearAllResults()">🗑️ Очистить все</button>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--&lt;!&ndash;    &lt;!&ndash; Загрузка &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="loading" id="loading">&ndash;&gt;-->
<!--&lt;!&ndash;      <div class="spinner"></div>&ndash;&gt;-->
<!--&lt;!&ndash;      <p>Загружаем результаты тестирования...</p>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--&lt;!&ndash;    &lt;!&ndash; Краткая статистика &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="results-section">&ndash;&gt;-->
<!--&lt;!&ndash;      <h2>📈 Краткая статистика тестов</h2>&ndash;&gt;-->
<!--&lt;!&ndash;      <div class="results-grid" id="summaryStats">&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="result-card">&ndash;&gt;-->
<!--&lt;!&ndash;          <h3>🎯 Общие показатели</h3>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Всего тестов:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value" id="totalTests">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Успешных запросов:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value success" id="successfulRequests">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Неудачных запросов:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value danger" id="failedRequests">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Успешность:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value" id="successRate">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->

<!--&lt;!&ndash;        <div class="result-card">&ndash;&gt;-->
<!--&lt;!&ndash;          <h3>⚡ Производительность</h3>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Среднее время отклика:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value" id="avgResponseTime">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Запросов в секунду:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value" id="requestsPerSecond">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Максимальное время:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value warning" id="maxResponseTime">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Минимальное время:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value success" id="minResponseTime">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->

<!--&lt;!&ndash;        <div class="result-card">&ndash;&gt;-->
<!--&lt;!&ndash;          <h3>💻 Система</h3>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Использование памяти:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value" id="memoryUsage">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Активные соединения БД:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value" id="dbConnections">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Время работы:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-value" id="uptime">&#45;&#45;</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;          <div class="metric">&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="metric-label">Статус:</span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span class="status-badge" id="systemStatus">Загрузка...</span>&ndash;&gt;-->
<!--&lt;!&ndash;          </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;      </div>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--&lt;!&ndash;    &lt;!&ndash; История тестов &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="results-section">&ndash;&gt;-->
<!--&lt;!&ndash;      <h2>📋 История тестов</h2>&ndash;&gt;-->
<!--&lt;!&ndash;      <div style="overflow-x: auto;">&ndash;&gt;-->
<!--&lt;!&ndash;        <table class="results-table" id="testsHistory">&ndash;&gt;-->
<!--&lt;!&ndash;          <thead>&ndash;&gt;-->
<!--&lt;!&ndash;          <tr>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Время</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Тип теста</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>URL/Профиль</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Запросов</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Успешно</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Ошибок</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Время отклика</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Статус</th>&ndash;&gt;-->
<!--&lt;!&ndash;            <th>Действия</th>&ndash;&gt;-->
<!--&lt;!&ndash;          </tr>&ndash;&gt;-->
<!--&lt;!&ndash;          </thead>&ndash;&gt;-->
<!--&lt;!&ndash;          <tbody id="testsHistoryBody">&ndash;&gt;-->
<!--&lt;!&ndash;          <tr>&ndash;&gt;-->
<!--&lt;!&ndash;            <td colspan="9" style="text-align: center; padding: 40px;">&ndash;&gt;-->
<!--&lt;!&ndash;              Загружаем историю тестов...&ndash;&gt;-->
<!--&lt;!&ndash;            </td>&ndash;&gt;-->
<!--&lt;!&ndash;          </tr>&ndash;&gt;-->
<!--&lt;!&ndash;          </tbody>&ndash;&gt;-->
<!--&lt;!&ndash;        </table>&ndash;&gt;-->
<!--&lt;!&ndash;      </div>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--&lt;!&ndash;    &lt;!&ndash; График производительности &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="chart-container">&ndash;&gt;-->
<!--&lt;!&ndash;      <h3>📈 График производительности</h3>&ndash;&gt;-->
<!--&lt;!&ndash;      <canvas id="performanceChart" width="400" height="200"></canvas>&ndash;&gt;-->
<!--&lt;!&ndash;      <p style="text-align: center; color: #7f8c8d; margin-top: 10px;">&ndash;&gt;-->
<!--&lt;!&ndash;        График будет отображен после загрузки данных тестирования&ndash;&gt;-->
<!--&lt;!&ndash;      </p>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;<script>&ndash;&gt;-->
<!--&lt;!&ndash;  let autoRefreshInterval = null;&ndash;&gt;-->
<!--&lt;!&ndash;  const resultsHistory = [];&ndash;&gt;-->

<!--&lt;!&ndash;  // Инициализация страницы&ndash;&gt;-->
<!--&lt;!&ndash;  document.addEventListener('DOMContentLoaded', function() {&ndash;&gt;-->
<!--&lt;!&ndash;    loadLatestResults();&ndash;&gt;-->
<!--&lt;!&ndash;    loadTestsHistory();&ndash;&gt;-->
<!--&lt;!&ndash;  });&ndash;&gt;-->

<!--&lt;!&ndash;  function showLoading() {&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('loading').style.display = 'block';&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function hideLoading() {&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('loading').style.display = 'none';&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  async function loadLatestResults() {&ndash;&gt;-->
<!--&lt;!&ndash;    showLoading();&ndash;&gt;-->

<!--&lt;!&ndash;    try {&ndash;&gt;-->
<!--&lt;!&ndash;      // Загружаем текущий статус теста&ndash;&gt;-->
<!--&lt;!&ndash;      const statusResponse = await fetch('/diagnostic/load-test/status');&ndash;&gt;-->
<!--&lt;!&ndash;      const statusData = await statusResponse.json();&ndash;&gt;-->

<!--&lt;!&ndash;      // Загружаем системную информацию&ndash;&gt;-->
<!--&lt;!&ndash;      const systemResponse = await fetch('/diagnostic/full-system');&ndash;&gt;-->
<!--&lt;!&ndash;      const systemData = await systemResponse.json();&ndash;&gt;-->

<!--&lt;!&ndash;      updateSummaryStats(statusData, systemData);&ndash;&gt;-->
<!--&lt;!&ndash;      hideLoading();&ndash;&gt;-->
<!--&lt;!&ndash;    } catch (error) {&ndash;&gt;-->
<!--&lt;!&ndash;      console.error('Ошибка загрузки результатов:', error);&ndash;&gt;-->
<!--&lt;!&ndash;      hideLoading();&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function updateSummaryStats(statusData, systemData) {&ndash;&gt;-->
<!--&lt;!&ndash;    // Обновляем общие показатели&ndash;&gt;-->
<!--&lt;!&ndash;    const total = statusData.successfulRequests + statusData.failedRequests;&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('totalTests').textContent = total || 0;&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('successfulRequests').textContent = statusData.successfulRequests || 0;&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('failedRequests').textContent = statusData.failedRequests || 0;&ndash;&gt;-->

<!--&lt;!&ndash;    const successRate = total > 0 ? ((statusData.successfulRequests / total) * 100).toFixed(1) : 0;&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('successRate').textContent = successRate + '%';&ndash;&gt;-->

<!--&lt;!&ndash;    // Производительность&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('avgResponseTime').textContent = statusData.averageResponseTime || '&#45;&#45;';&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('requestsPerSecond').textContent = '&#45;&#45;'; // Будет рассчитано из данных теста&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('maxResponseTime').textContent = '&#45;&#45;';&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('minResponseTime').textContent = '&#45;&#45;';&ndash;&gt;-->

<!--&lt;!&ndash;    // Системная информация&ndash;&gt;-->
<!--&lt;!&ndash;    if (systemData.memory && systemData.memory.процентИспользования) {&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById('memoryUsage').textContent = systemData.memory.процентИспользования;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    if (systemData.databasePool) {&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById('dbConnections').textContent =&ndash;&gt;-->
<!--&lt;!&ndash;              `${systemData.databasePool.active}/${systemData.databasePool.total}`;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    if (systemData.system && systemData.system.uptimeMinutes) {&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById('uptime').textContent = systemData.system.uptimeMinutes + ' мин';&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->

<!--&lt;!&ndash;    // Статус системы&ndash;&gt;-->
<!--&lt;!&ndash;    const statusBadge = document.getElementById('systemStatus');&ndash;&gt;-->
<!--&lt;!&ndash;    if (statusData.isRunning) {&ndash;&gt;-->
<!--&lt;!&ndash;      statusBadge.textContent = 'Выполняется';&ndash;&gt;-->
<!--&lt;!&ndash;      statusBadge.className = 'status-badge status-running';&ndash;&gt;-->
<!--&lt;!&ndash;    } else if (total > 0) {&ndash;&gt;-->
<!--&lt;!&ndash;      statusBadge.textContent = 'Завершен';&ndash;&gt;-->
<!--&lt;!&ndash;      statusBadge.className = 'status-badge status-completed';&ndash;&gt;-->
<!--&lt;!&ndash;    } else {&ndash;&gt;-->
<!--&lt;!&ndash;      statusBadge.textContent = 'Готов';&ndash;&gt;-->
<!--&lt;!&ndash;      statusBadge.className = 'status-badge status-completed';&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function loadTestsHistory() {&ndash;&gt;-->
<!--&lt;!&ndash;    // Симуляция истории тестов (в реальном приложении данные будут из БД)&ndash;&gt;-->
<!--&lt;!&ndash;    const tbody = document.getElementById('testsHistoryBody');&ndash;&gt;-->
<!--&lt;!&ndash;    tbody.innerHTML = `&ndash;&gt;-->
<!--&lt;!&ndash;                <tr>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td>${new Date().toLocaleString('ru-RU')}</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td>Простой тест</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td>/profile/4</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td>50</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td class="metric-value success">48</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td class="metric-value danger">2</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td>245ms</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td><span class="status-badge status-completed">Завершен</span></td>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td>&ndash;&gt;-->
<!--&lt;!&ndash;                        <button class="btn" style="padding: 5px 10px; font-size: 12px;">📊 Детали</button>&ndash;&gt;-->
<!--&lt;!&ndash;                    </td>&ndash;&gt;-->
<!--&lt;!&ndash;                </tr>&ndash;&gt;-->
<!--&lt;!&ndash;                <tr>&ndash;&gt;-->
<!--&lt;!&ndash;                    <td colspan="9" style="text-align: center; color: #7f8c8d;">&ndash;&gt;-->
<!--&lt;!&ndash;                        Дополнительная история будет загружена из базы данных&ndash;&gt;-->
<!--&lt;!&ndash;                    </td>&ndash;&gt;-->
<!--&lt;!&ndash;                </tr>&ndash;&gt;-->
<!--&lt;!&ndash;            `;&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function startAutoRefresh() {&ndash;&gt;-->
<!--&lt;!&ndash;    if (autoRefreshInterval) return;&ndash;&gt;-->

<!--&lt;!&ndash;    autoRefreshInterval = setInterval(() => {&ndash;&gt;-->
<!--&lt;!&ndash;      loadLatestResults();&ndash;&gt;-->
<!--&lt;!&ndash;    }, 5000); // Каждые 5 секунд&ndash;&gt;-->

<!--&lt;!&ndash;    alert('Авто-обновление включено (каждые 5 сек)');&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function stopAutoRefresh() {&ndash;&gt;-->
<!--&lt;!&ndash;    if (autoRefreshInterval) {&ndash;&gt;-->
<!--&lt;!&ndash;      clearInterval(autoRefreshInterval);&ndash;&gt;-->
<!--&lt;!&ndash;      autoRefreshInterval = null;&ndash;&gt;-->
<!--&lt;!&ndash;      alert('Авто-обновление выключено');&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  function clearAllResults() {&ndash;&gt;-->
<!--&lt;!&ndash;    if (confirm('Вы уверены, что хотите очистить все результаты?')) {&ndash;&gt;-->
<!--&lt;!&ndash;      // В реальном приложении здесь будет вызов API для очистки&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById('testsHistoryBody').innerHTML = `&ndash;&gt;-->
<!--&lt;!&ndash;                    <tr>&ndash;&gt;-->
<!--&lt;!&ndash;                        <td colspan="9" style="text-align: center; padding: 40px;">&ndash;&gt;-->
<!--&lt;!&ndash;                            Результаты очищены&ndash;&gt;-->
<!--&lt;!&ndash;                        </td>&ndash;&gt;-->
<!--&lt;!&ndash;                    </tr>&ndash;&gt;-->
<!--&lt;!&ndash;                `;&ndash;&gt;-->

<!--&lt;!&ndash;      // Сброс статистики&ndash;&gt;-->
<!--&lt;!&ndash;      ['totalTests', 'successfulRequests', 'failedRequests', 'successRate',&ndash;&gt;-->
<!--&lt;!&ndash;        'avgResponseTime', 'requestsPerSecond', 'maxResponseTime', 'minResponseTime'].forEach(id => {&ndash;&gt;-->
<!--&lt;!&ndash;        document.getElementById(id).textContent = '&#45;&#45;';&ndash;&gt;-->
<!--&lt;!&ndash;      });&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  }&ndash;&gt;-->

<!--&lt;!&ndash;  // Очистка при выходе со страницы&ndash;&gt;-->
<!--&lt;!&ndash;  window.addEventListener('beforeunload', () => {&ndash;&gt;-->
<!--&lt;!&ndash;    if (autoRefreshInterval) {&ndash;&gt;-->
<!--&lt;!&ndash;      clearInterval(autoRefreshInterval);&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  });&ndash;&gt;-->
<!--&lt;!&ndash;</script>&ndash;&gt;-->
<!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->


<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>Анализ результатов тестирования</title>-->
<!--  <style>-->
<!--    * {-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--      box-sizing: border-box;-->
<!--    }-->

<!--    body {-->
<!--      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--      min-height: 100vh;-->
<!--      padding: 20px;-->
<!--    }-->

<!--    .container {-->
<!--      max-width: 1400px;-->
<!--      margin: 0 auto;-->
<!--      background: white;-->
<!--      border-radius: 15px;-->
<!--      box-shadow: 0 10px 30px rgba(0,0,0,0.1);-->
<!--      overflow: hidden;-->
<!--    }-->

<!--    .header {-->
<!--      background: linear-gradient(45deg, #27ae60, #2ecc71);-->
<!--      color: white;-->
<!--      padding: 30px;-->
<!--      text-align: center;-->
<!--    }-->

<!--    .header h1 {-->
<!--      font-size: 2.5em;-->
<!--      margin-bottom: 10px;-->
<!--    }-->

<!--    .content {-->
<!--      padding: 30px;-->
<!--    }-->

<!--    .summary-cards {-->
<!--      display: grid;-->
<!--      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));-->
<!--      gap: 20px;-->
<!--      margin-bottom: 30px;-->
<!--    }-->

<!--    .summary-card {-->
<!--      background: linear-gradient(135deg, #ffffff, #f8f9fa);-->
<!--      padding: 25px;-->
<!--      border-radius: 15px;-->
<!--      box-shadow: 0 5px 20px rgba(0,0,0,0.1);-->
<!--      border-left: 5px solid #27ae60;-->
<!--      text-align: center;-->
<!--      transition: transform 0.3s;-->
<!--    }-->

<!--    .summary-card:hover {-->
<!--      transform: translateY(-5px);-->
<!--    }-->

<!--    .summary-value {-->
<!--      font-size: 2.5em;-->
<!--      font-weight: bold;-->
<!--      color: #2c3e50;-->
<!--      margin-bottom: 10px;-->
<!--    }-->

<!--    .summary-value.success {-->
<!--      color: #27ae60;-->
<!--    }-->

<!--    .summary-value.warning {-->
<!--      color: #f39c12;-->
<!--    }-->

<!--    .summary-value.info {-->
<!--      color: #3498db;-->
<!--    }-->

<!--    .summary-label {-->
<!--      color: #7f8c8d;-->
<!--      font-size: 1.1em;-->
<!--      font-weight: 500;-->
<!--    }-->

<!--    .analysis-section {-->
<!--      background: #f8f9fa;-->
<!--      border-radius: 15px;-->
<!--      padding: 30px;-->
<!--      margin-bottom: 25px;-->
<!--      border-left: 5px solid #3498db;-->
<!--    }-->

<!--    .analysis-section h2 {-->
<!--      color: #2c3e50;-->
<!--      margin-bottom: 20px;-->
<!--      font-size: 1.8em;-->
<!--    }-->

<!--    .comparison-grid {-->
<!--      display: grid;-->
<!--      grid-template-columns: 1fr 1fr;-->
<!--      gap: 30px;-->
<!--      margin: 20px 0;-->
<!--    }-->

<!--    .comparison-card {-->
<!--      background: white;-->
<!--      padding: 20px;-->
<!--      border-radius: 10px;-->
<!--      box-shadow: 0 2px 10px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    .comparison-card h3 {-->
<!--      color: #2c3e50;-->
<!--      margin-bottom: 15px;-->
<!--      text-align: center;-->
<!--      padding: 10px;-->
<!--      background: linear-gradient(45deg, #ecf0f1, #bdc3c7);-->
<!--      border-radius: 8px;-->
<!--    }-->

<!--    .metric-row {-->
<!--      display: flex;-->
<!--      justify-content: space-between;-->
<!--      padding: 10px 0;-->
<!--      border-bottom: 1px solid #ecf0f1;-->
<!--    }-->

<!--    .metric-row:last-child {-->
<!--      border-bottom: none;-->
<!--    }-->

<!--    .metric-label {-->
<!--      color: #7f8c8d;-->
<!--      font-weight: 500;-->
<!--    }-->

<!--    .metric-value {-->
<!--      font-weight: 600;-->
<!--      color: #2c3e50;-->
<!--    }-->

<!--    .improvement {-->
<!--      color: #27ae60;-->
<!--    }-->

<!--    .degradation {-->
<!--      color: #e74c3c;-->
<!--    }-->

<!--    .neutral {-->
<!--      color: #95a5a6;-->
<!--    }-->

<!--    .recommendations {-->
<!--      background: linear-gradient(135deg, #3498db, #2980b9);-->
<!--      color: white;-->
<!--      padding: 25px;-->
<!--      border-radius: 15px;-->
<!--      margin: 25px 0;-->
<!--    }-->

<!--    .recommendations h3 {-->
<!--      margin-bottom: 15px;-->
<!--      font-size: 1.5em;-->
<!--    }-->

<!--    .recommendation-item {-->
<!--      background: rgba(255,255,255,0.1);-->
<!--      padding: 15px;-->
<!--      border-radius: 8px;-->
<!--      margin: 10px 0;-->
<!--      border-left: 4px solid rgba(255,255,255,0.3);-->
<!--    }-->

<!--    .status-badge {-->
<!--      display: inline-block;-->
<!--      padding: 5px 15px;-->
<!--      border-radius: 20px;-->
<!--      font-size: 0.9em;-->
<!--      font-weight: 600;-->
<!--      text-transform: uppercase;-->
<!--    }-->

<!--    .status-excellent {-->
<!--      background: #d4edda;-->
<!--      color: #155724;-->
<!--    }-->

<!--    .status-good {-->
<!--      background: #d1ecf1;-->
<!--      color: #0c5460;-->
<!--    }-->

<!--    .status-warning {-->
<!--      background: #fff3cd;-->
<!--      color: #856404;-->
<!--    }-->

<!--    .performance-chart {-->
<!--      background: white;-->
<!--      padding: 20px;-->
<!--      border-radius: 10px;-->
<!--      margin: 20px 0;-->
<!--      box-shadow: 0 2px 10px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    .chart-bar {-->
<!--      height: 30px;-->
<!--      background: linear-gradient(90deg, #27ae60, #2ecc71);-->
<!--      border-radius: 15px;-->
<!--      margin: 10px 0;-->
<!--      position: relative;-->
<!--      overflow: hidden;-->
<!--    }-->

<!--    .chart-label {-->
<!--      position: absolute;-->
<!--      left: 15px;-->
<!--      top: 50%;-->
<!--      transform: translateY(-50%);-->
<!--      color: white;-->
<!--      font-weight: 600;-->
<!--    }-->

<!--    .btn {-->
<!--      background: linear-gradient(45deg, #3498db, #2980b9);-->
<!--      color: white;-->
<!--      border: none;-->
<!--      padding: 15px 30px;-->
<!--      border-radius: 8px;-->
<!--      cursor: pointer;-->
<!--      font-size: 16px;-->
<!--      font-weight: 600;-->
<!--      transition: all 0.3s;-->
<!--      margin: 10px;-->
<!--    }-->

<!--    .btn:hover {-->
<!--      transform: translateY(-2px);-->
<!--      box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);-->
<!--    }-->

<!--    .btn-success {-->
<!--      background: linear-gradient(45deg, #27ae60, #2ecc71);-->
<!--    }-->

<!--    .btn-warning {-->
<!--      background: linear-gradient(45deg, #f39c12, #e67e22);-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--  <div class="header">-->
<!--    <h1>📊 Анализ результатов тестирования</h1>-->
<!--    <p>Детальный анализ производительности системы Cleopatra</p>-->
<!--  </div>-->

<!--  <div class="content">-->
<!--    &lt;!&ndash; Краткая сводка &ndash;&gt;-->
<!--    <div class="summary-cards">-->
<!--      <div class="summary-card">-->
<!--        <div class="summary-value success">100%</div>-->
<!--        <div class="summary-label">Успешность тестов</div>-->
<!--      </div>-->
<!--      <div class="summary-card">-->
<!--        <div class="summary-value info">668 мс</div>-->
<!--        <div class="summary-label">Среднее время отклика</div>-->
<!--      </div>-->
<!--      <div class="summary-card">-->
<!--        <div class="summary-value">50</div>-->
<!--        <div class="summary-label">Запросов выполнено</div>-->
<!--      </div>-->
<!--      <div class="summary-card">-->
<!--        <div class="summary-value warning">+9.7%</div>-->
<!--        <div class="summary-label">Изменение памяти</div>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Оценка производительности &ndash;&gt;-->
<!--    <div class="analysis-section">-->
<!--      <h2>🎯 Общая оценка производительности</h2>-->
<!--      <div style="text-align: center; margin: 20px 0;">-->
<!--        <span class="status-badge status-excellent">ОТЛИЧНАЯ ПРОИЗВОДИТЕЛЬНОСТЬ</span>-->
<!--      </div>-->

<!--      <div class="performance-chart">-->
<!--        <h4>Показатели производительности:</h4>-->
<!--        <div class="chart-bar" style="width: 100%;">-->
<!--          <div class="chart-label">Успешность запросов: 100%</div>-->
<!--        </div>-->
<!--        <div class="chart-bar" style="width: 85%;">-->
<!--          <div class="chart-label">Время отклика: 85/100</div>-->
<!--        </div>-->
<!--        <div class="chart-bar" style="width: 90%;">-->
<!--          <div class="chart-label">Стабильность системы: 90/100</div>-->
<!--        </div>-->
<!--        <div class="chart-bar" style="width: 95%;">-->
<!--          <div class="chart-label">Использование ресурсов: 95/100</div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Сравнение до/после &ndash;&gt;-->
<!--    <div class="analysis-section">-->
<!--      <h2>⚖️ Сравнение состояния системы</h2>-->
<!--      <div class="comparison-grid">-->
<!--        <div class="comparison-card">-->
<!--          <h3>🟢 ДО тестирования</h3>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Память (используется):</span>-->
<!--            <span class="metric-value">153 МБ (49.0%)</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Heap память:</span>-->
<!--            <span class="metric-value">151 МБ</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Свободная память:</span>-->
<!--            <span class="metric-value">159 МБ</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">БД соединения:</span>-->
<!--            <span class="metric-value">0/10 активных</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Время работы:</span>-->
<!--            <span class="metric-value">1 мин</span>-->
<!--          </div>-->
<!--        </div>-->

<!--        <div class="comparison-card">-->
<!--          <h3>🔴 ПОСЛЕ тестирования</h3>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Память (используется):</span>-->
<!--            <span class="metric-value degradation">183 МБ (58.7%) ↗️</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Heap память:</span>-->
<!--            <span class="metric-value degradation">181 МБ ↗️</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Свободная память:</span>-->
<!--            <span class="metric-value improvement">129 МБ ↘️</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">БД соединения:</span>-->
<!--            <span class="metric-value neutral">0/10 активных ➡️</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Время работы:</span>-->
<!--            <span class="metric-value">2 мин</span>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Детальная статистика &ndash;&gt;-->
<!--    <div class="analysis-section">-->
<!--      <h2>📈 Детальная статистика теста</h2>-->
<!--      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">-->
<!--        <div class="comparison-card">-->
<!--          <h4>⏱️ Временные характеристики</h4>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Время начала:</span>-->
<!--            <span class="metric-value">01:50:24</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Время окончания:</span>-->
<!--            <span class="metric-value">01:50:57</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Общая длительность:</span>-->
<!--            <span class="metric-value">33.4 секунды</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Среднее время отклика:</span>-->
<!--            <span class="metric-value">668 мс</span>-->
<!--          </div>-->
<!--        </div>-->

<!--        <div class="comparison-card">-->
<!--          <h4>🎯 Результативность</h4>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Успешных запросов:</span>-->
<!--            <span class="metric-value improvement">50 (100%)</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Неудачных запросов:</span>-->
<!--            <span class="metric-value improvement">0 (0%)</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Производительность:</span>-->
<!--            <span class="metric-value">1.5 запросов/сек</span>-->
<!--          </div>-->
<!--          <div class="metric-row">-->
<!--            <span class="metric-label">Стабильность:</span>-->
<!--            <span class="metric-value improvement">Отличная</span>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Рекомендации &ndash;&gt;-->
<!--    <div class="recommendations">-->
<!--      <h3>💡 Рекомендации для оптимизации</h3>-->

<!--      <div class="recommendation-item">-->
<!--        <strong>✅ Отличные результаты!</strong><br>-->
<!--        Ваша система показывает превосходную производительность с 100% успешностью запросов.-->
<!--      </div>-->

<!--      <div class="recommendation-item">-->
<!--        <strong>🚀 Возможности для улучшения:</strong><br>-->
<!--        • Среднее время отклика 668 мс можно оптимизировать до 400-500 мс<br>-->
<!--        • Рассмотрите кэширование для часто запрашиваемых профилей<br>-->
<!--        • Оптимизируйте запросы к базе данных-->
<!--      </div>-->

<!--      <div class="recommendation-item">-->
<!--        <strong>📊 Мониторинг:</strong><br>-->
<!--        • Увеличение памяти на 9.7% - нормальное явление под нагрузкой<br>-->
<!--        • База данных работает стабильно без ожиданий соединений<br>-->
<!--        • Система остается в состоянии "Стабильно"-->
<!--      </div>-->

<!--      <div class="recommendation-item">-->
<!--        <strong>🔄 Следующие шаги:</strong><br>-->
<!--        • Протестируйте с большей нагрузкой (100-200 запросов)<br>-->
<!--        • Проверьте поведение при конкурентных запросах<br>-->
<!--        • Мониторьте производительность в production-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Действия &ndash;&gt;-->
<!--    <div style="text-align: center; margin: 30px 0;">-->
<!--      <button class="btn btn-success" onclick="runAnotherTest()">🔄 Запустить новый тест</button>-->
<!--      <button class="btn" onclick="exportReport()">📊 Экспорт отчета</button>-->
<!--      <button class="btn btn-warning" onclick="viewDetailedLogs()">📝 Подробные логи</button>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!--<script>-->
<!--  function runAnotherTest() {-->
<!--    if (confirm('Запустить новый тест нагрузки?')) {-->
<!--      window.location.href = '/diagnostic/load-test';-->
<!--    }-->
<!--  }-->

<!--  function exportReport() {-->
<!--    const reportData = {-->
<!--      testResults: {-->
<!--        totalRequests: 50,-->
<!--        successfulRequests: 50,-->
<!--        failedRequests: 0,-->
<!--        averageResponseTime: "668 мс",-->
<!--        testDuration: "33.4 секунды",-->
<!--        requestsPerSecond: 1.5-->
<!--      },-->
<!--      systemImpact: {-->
<!--        memoryBefore: "153 МБ (49.0%)",-->
<!--        memoryAfter: "183 МБ (58.7%)",-->
<!--        memoryIncrease: "+30 МБ (+9.7%)",-->
<!--        systemStatus: "Стабильно"-->
<!--      },-->
<!--      recommendation: "Отличная производительность",-->
<!--      timestamp: new Date().toISOString()-->
<!--    };-->

<!--    const blob = new Blob([JSON.stringify(reportData, null, 2)], {-->
<!--      type: 'application/json'-->
<!--    });-->
<!--    const url = URL.createObjectURL(blob);-->
<!--    const a = document.createElement('a');-->
<!--    a.href = url;-->
<!--    a.download = `load-test-analysis-${new Date().toISOString().slice(0,19)}.json`;-->
<!--    a.click();-->
<!--    URL.revokeObjectURL(url);-->
<!--  }-->

<!--  function viewDetailedLogs() {-->
<!--    window.location.href = '/diagnostic/system-monitor';-->
<!--  }-->

<!--  // Автообновление времени-->
<!--  function updateTimestamp() {-->
<!--    const elements = document.querySelectorAll('.timestamp');-->
<!--    const now = new Date().toLocaleString('ru-RU');-->
<!--    elements.forEach(el => el.textContent = now);-->
<!--  }-->

<!--  setInterval(updateTimestamp, 1000);-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Продвинутый анализ производительности</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(45deg, #f39c12, #e67e22);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .alert-banner {
      background: linear-gradient(45deg, #e74c3c, #c0392b);
      color: white;
      padding: 15px;
      text-align: center;
      font-weight: 600;
      margin-bottom: 20px;
    }

    .content {
      padding: 30px;
    }

    .comparison-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin: 30px 0;
    }

    .test-card {
      background: linear-gradient(135deg, #ffffff, #f8f9fa);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      border-left: 6px solid;
      position: relative;
    }

    .test-card.test-50 {
      border-left-color: #27ae60;
    }

    .test-card.test-100 {
      border-left-color: #f39c12;
    }

    .test-card h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 1.5em;
      text-align: center;
    }

    .metric-comparison {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #ecf0f1;
    }

    .metric-comparison:last-child {
      border-bottom: none;
    }

    .metric-label {
      color: #7f8c8d;
      font-weight: 500;
    }

    .metric-value {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .metric-value.excellent {
      color: #27ae60;
    }

    .metric-value.good {
      color: #3498db;
    }

    .metric-value.warning {
      color: #f39c12;
    }

    .metric-value.critical {
      color: #e74c3c;
    }

    .change-indicator {
      font-size: 0.9em;
      padding: 2px 8px;
      border-radius: 12px;
      font-weight: 600;
    }

    .change-positive {
      background: #d4edda;
      color: #155724;
    }

    .change-negative {
      background: #f8d7da;
      color: #721c24;
    }

    .change-neutral {
      background: #e2e3e5;
      color: #383d41;
    }

    .trend-analysis {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 30px;
      margin: 25px 0;
      border-left: 5px solid #3498db;
    }

    .trend-analysis h2 {
      color: #2c3e50;
      margin-bottom: 20px;
    }

    .memory-progression {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .memory-bar {
      height: 40px;
      background: #ecf0f1;
      border-radius: 20px;
      margin: 15px 0;
      position: relative;
      overflow: hidden;
    }

    .memory-fill {
      height: 100%;
      border-radius: 20px;
      position: relative;
      transition: width 1s ease;
    }

    .memory-fill.safe {
      background: linear-gradient(90deg, #27ae60, #2ecc71);
    }

    .memory-fill.caution {
      background: linear-gradient(90deg, #f39c12, #e67e22);
    }

    .memory-fill.warning {
      background: linear-gradient(90deg, #e74c3c, #c0392b);
    }

    .memory-label {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: white;
      font-weight: 600;
      z-index: 2;
    }

    .memory-percentage {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: white;
      font-weight: 600;
      z-index: 2;
    }

    .recommendations {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
      color: white;
      padding: 25px;
      border-radius: 15px;
      margin: 25px 0;
    }

    .recommendations h3 {
      margin-bottom: 15px;
      font-size: 1.5em;
    }

    .recommendation-item {
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      border-left: 4px solid rgba(255,255,255,0.3);
    }

    .recommendation-item.urgent {
      background: rgba(255,255,255,0.2);
      border-left-color: #fff;
    }

    .performance-graph {
      background: white;
      padding: 25px;
      border-radius: 15px;
      margin: 25px 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .graph-container {
      position: relative;
      height: 300px;
      margin: 20px 0;
    }

    .graph-line {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 2px;
      background: #ecf0f1;
    }

    .graph-point {
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #3498db;
      transform: translate(-50%, -50%);
    }

    .graph-point.memory {
      background: #e74c3c;
    }

    .graph-point.response-time {
      background: #27ae60;
    }

    .btn {
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s;
      margin: 10px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
    }

    .btn-danger {
      background: linear-gradient(45deg, #e74c3c, #c0392b);
    }

    .btn-warning {
      background: linear-gradient(45deg, #f39c12, #e67e22);
    }

    .btn-success {
      background: linear-gradient(45deg, #27ae60, #2ecc71);
    }

    .scale-test-suggestions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 25px 0;
    }

    .scale-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
      border-top: 4px solid;
    }

    .scale-card.next-level {
      border-top-color: #f39c12;
    }

    .scale-card.stress-test {
      border-top-color: #e74c3c;
    }

    .scale-card.optimization {
      border-top-color: #3498db;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>⚠️ Продвинутый анализ нагрузки</h1>
    <p>Система показывает признаки стресса при 100 запросах</p>
  </div>

  <div class="alert-banner">
    🚨 ВНИМАНИЕ: Использование памяти достигло 85.6% - приближается к критическому порогу!
  </div>

  <div class="content">
    <!-- Сравнение двух тестов -->
    <div class="comparison-section">
      <div class="test-card test-50">
        <h3>🟢 Тест: 50 запросов</h3>
        <div class="metric-comparison">
          <span class="metric-label">Успешность:</span>
          <span class="metric-value excellent">100% <span class="change-indicator change-positive">Отлично</span></span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Время отклика:</span>
          <span class="metric-value good">668 мс</span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Память (до):</span>
          <span class="metric-value good">49.0%</span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Память (после):</span>
          <span class="metric-value good">58.7% <span class="change-indicator change-positive">+9.7%</span></span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Статус системы:</span>
          <span class="metric-value excellent">Стабильно → Стабильно</span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Длительность:</span>
          <span class="metric-value good">33.4 сек</span>
        </div>
      </div>

      <div class="test-card test-100">
        <h3>🟡 Тест: 100 запросов</h3>
        <div class="metric-comparison">
          <span class="metric-label">Успешность:</span>
          <span class="metric-value excellent">100% <span class="change-indicator change-positive">Отлично</span></span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Время отклика:</span>
          <span class="metric-value excellent">652 мс <span class="change-indicator change-positive">-16 мс</span></span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Память (до):</span>
          <span class="metric-value warning">66.7% <span class="change-indicator change-negative">+17.7%</span></span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Память (после):</span>
          <span class="metric-value critical">85.6% <span class="change-indicator change-negative">+26.9%</span></span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Статус системы:</span>
          <span class="metric-value warning">Нормальная → Высокая</span>
        </div>
        <div class="metric-comparison">
          <span class="metric-label">Длительность:</span>
          <span class="metric-value good">65.3 сек</span>
        </div>
      </div>
    </div>

    <!-- Анализ прогрессии памяти -->
    <div class="trend-analysis">
      <h2>📊 Прогрессия использования памяти</h2>
      <div class="memory-progression">
        <h4>Базовый уровень (50 запросов):</h4>
        <div class="memory-bar">
          <div class="memory-fill safe" style="width: 49%">
            <div class="memory-label">До теста: 49.0%</div>
            <div class="memory-percentage">49%</div>
          </div>
        </div>
        <div class="memory-bar">
          <div class="memory-fill safe" style="width: 58.7%">
            <div class="memory-label">После теста: 58.7%</div>
            <div class="memory-percentage">59%</div>
          </div>
        </div>

        <h4 style="margin-top: 25px;">Повышенная нагрузка (100 запросов):</h4>
        <div class="memory-bar">
          <div class="memory-fill caution" style="width: 66.7%">
            <div class="memory-label">До теста: 66.7%</div>
            <div class="memory-percentage">67%</div>
          </div>
        </div>
        <div class="memory-bar">
          <div class="memory-fill warning" style="width: 85.6%">
            <div class="memory-label">После теста: 85.6%</div>
            <div class="memory-percentage">86%</div>
          </div>
        </div>
      </div>

      <div style="background: white; padding: 20px; border-radius: 10px; margin-top: 20px;">
        <h4>🔍 Ключевые наблюдения:</h4>
        <ul style="margin-left: 20px; color: #2c3e50;">
          <li><strong>Базовый уровень вырос</strong> с 49% до 66.7% между тестами</li>
          <li><strong>Прирост памяти под нагрузкой:</strong> 9.7% → 18.9% (почти удвоился)</li>
          <li><strong>Система перешла в режим "Высокая нагрузка"</strong> при 85.6%</li>
          <li><strong>Критический порог 90%</strong> может быть достигнут при следующем тесте</li>
        </ul>
      </div>
    </div>

    <!-- Критические рекомендации -->
    <div class="recommendations">
      <h3>🚨 Критические рекомендации</h3>

      <div class="recommendation-item urgent">
        <strong>⚠️ СРОЧНО: Мониторинг памяти</strong><br>
        При 85.6% использования памяти система приближается к критическому порогу 90%.
        Рекомендуется немедленно настроить алерты и провести анализ утечек памяти.
      </div>

      <div class="recommendation-item">
        <strong>🛑 НЕ УВЕЛИЧИВАТЬ нагрузку без оптимизации</strong><br>
        • Следующий тест может вызвать OutOfMemoryError<br>
        • Сначала оптимизируйте использование памяти<br>
        • Настройте сборку мусора (GC tuning)
      </div>

      <div class="recommendation-item">
        <strong>🔧 Немедленные действия:</strong><br>
        • Увеличить heap размер JVM (-Xmx)<br>
        • Добавить кэширование для профилей<br>
        • Оптимизировать запросы к БД<br>
        • Провести профилирование памяти
      </div>

      <div class="recommendation-item">
        <strong>📊 Позитивные моменты:</strong><br>
        • 100% успешность запросов сохраняется<br>
        • Время отклика даже улучшилось<br>
        • База данных работает стабильно<br>
        • Система не падает под нагрузкой
      </div>
    </div>

    <!-- График производительности -->
    <div class="performance-graph">
      <h3>📈 Сравнительный анализ производительности</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; text-align: center; margin: 20px 0;">
        <div>
          <h4>Время отклика</h4>
          <div style="font-size: 2em; color: #27ae60;">↗️ +2.4%</div>
          <small>652 мс vs 668 мс</small>
        </div>
        <div>
          <h4>Использование памяти</h4>
          <div style="font-size: 2em; color: #e74c3c;">⚠️ +46%</div>
          <small>85.6% vs 58.7%</small>
        </div>
        <div>
          <h4>Успешность</h4>
          <div style="font-size: 2em; color: #27ae60;">✅ 100%</div>
          <small>Без изменений</small>
        </div>
      </div>
    </div>

    <!-- Предложения следующих тестов -->
    <div class="trend-analysis">
      <h2>🚀 Рекомендации по дальнейшему тестированию</h2>
      <div class="scale-test-suggestions">
        <div class="scale-card optimization">
          <h4>🔧 Сначала: Оптимизация</h4>
          <p><strong>Приоритет:</strong> Высокий</p>
          <p>• Настройка JVM heap</p>
          <p>• Добавление кэширования</p>
          <p>• Оптимизация SQL</p>
          <p>• Профилирование памяти</p>
        </div>

        <div class="scale-card next-level">
          <h4>⚡ После оптимизации: 150 запросов</h4>
          <p><strong>Цель:</strong> Проверить улучшения</p>
          <p>• Память должна быть < 70%</p>
          <p>• Время отклика < 500 мс</p>
          <p>• 100% успешность</p>
        </div>

        <div class="scale-card stress-test">
          <h4>🔥 Стресс-тест: Конкурентность</h4>
          <p><strong>Когда:</strong> После оптимизации</p>
          <p>• 100 запросов × 5 потоков</p>
          <p>• Проверка race conditions</p>
          <p>• Тест пулов соединений</p>
        </div>
      </div>
    </div>

    <!-- Действия -->
    <div style="text-align: center; margin: 30px 0;">
      <button class="btn btn-danger" onclick="alert('⚠️ Рекомендуется сначала провести оптимизацию!')">🚫 НЕ тестировать больше</button>
      <button class="btn btn-warning" onclick="window.location.href='/diagnostic/system-monitor'">📊 Мониторинг памяти</button>
      <button class="btn" onclick="exportDetailedReport()">📊 Экспорт анализа</button>
      <button class="btn btn-success" onclick="showOptimizationGuide()">🔧 Гид по оптимизации</button>
    </div>
  </div>
</div>

<script>
  function exportDetailedReport() {
    const reportData = {
      summary: {
        testType: "Comparative Load Test",
        tests: [
          {
            requests: 50,
            successRate: "100%",
            avgResponseTime: "668 ms",
            memoryBefore: "49.0%",
            memoryAfter: "58.7%",
            memoryIncrease: "+9.7%",
            systemStatus: "Stable → Stable"
          },
          {
            requests: 100,
            successRate: "100%",
            avgResponseTime: "652 ms",
            memoryBefore: "66.7%",
            memoryAfter: "85.6%",
            memoryIncrease: "+18.9%",
            systemStatus: "Normal → High Load"
          }
        ]
      },
      keyFindings: {
        performance: "Response time improved by 16ms",
        reliability: "100% success rate maintained",
        memory: "Critical: Memory usage approaching 90% threshold",
        scalability: "System shows stress at 100 requests"
      },
      recommendations: {
        immediate: [
          "Set up memory monitoring alerts",
          "Increase JVM heap size",
          "Implement caching for profiles"
        ],
        beforeNextTest: [
          "Optimize database queries",
          "Profile memory usage",
          "Tune garbage collection"
        ],
        futureTests: [
          "Test with optimizations first",
          "Gradual scaling instead of doubling",
          "Concurrent request testing"
        ]
      },
      riskAssessment: {
        level: "HIGH",
        reason: "Memory usage at 85.6% approaching critical threshold",
        nextTestRisk: "OutOfMemoryError likely at 150+ requests"
      },
      timestamp: new Date().toISOString()
    };

    const blob = new Blob([JSON.stringify(reportData, null, 2)], {
      type: 'application/json'
    });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `detailed-load-test-analysis-${new Date().toISOString().slice(0,19)}.json`;
    a.click();
    URL.revokeObjectURL(url);
  }

  function showOptimizationGuide() {
    alert(`🔧 Рекомендации по оптимизации:

1. JVM НАСТРОЙКИ:
   -Xmx2g (увеличить heap до 2GB)
   -XX:+UseG1GC (использовать G1 сборщик)

2. КЭШИРОВАНИЕ:
   @Cacheable для профилей пользователей
   Redis для сессий

3. БАЗА ДАННЫХ:
   Индексы на часто используемые поля
   Connection pooling настройки

4. КОД:
   Lazy loading для связанных объектов
   Pagination для больших списков`);
  }

  // Анимация загрузки графиков
  document.addEventListener('DOMContentLoaded', function() {
    const memoryBars = document.querySelectorAll('.memory-fill');
    memoryBars.forEach((bar, index) => {
      setTimeout(() => {
        bar.style.transform = 'scaleX(1)';
      }, index * 500);
    });
  });
</script>
</body>
</html>
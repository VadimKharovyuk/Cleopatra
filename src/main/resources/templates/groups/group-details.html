
<!-- groups/group-details.html -->
<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${group.name} + ' - Cleopatra'">–ì—Ä—É–ø–ø–∞ - Cleopatra</title>
</head>
<body>
<header>
    <nav>
        <h1>Cleopatra</h1>
        <div>
            <a href="/groups">–ì—Ä—É–ø–ø—ã</a>
            <a href="/profile">–ü—Ä–æ—Ñ–∏–ª—å</a>
        </div>
    </nav>
</header>

<main>
    <div class="container">
        <!-- –§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
        <div class="group-header">
            <div th:if="${group.backgroundImageUrl}"
                 class="background-image"
                 th:style="'background-image: url(' + ${group.backgroundImageUrl} + ')'">
            </div>

            <div class="group-main-info">
                <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                <div class="group-avatar">
                    <img th:if="${group.imageUrl}"
                         th:src="${group.imageUrl}"
                         th:alt="${group.name}"
                         style="width: 120px; height: 120px; border-radius: 8px; object-fit: cover;">
                    <div th:unless="${group.imageUrl}" class="no-avatar">
                        –ù–µ—Ç —Ñ–æ—Ç–æ
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ -->
                <div class="group-info">
                    <h1 th:text="${group.name}">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</h1>
                    <p th:text="${group.description}">–û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</p>

                    <div class="group-stats">
                            <span class="stat">
                                üë• <span th:text="${group.memberCount}">0</span> —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
                            </span>
                        <span class="stat" th:text="${group.groupType.displayName}">–¢–∏–ø –≥—Ä—É–ø–ø—ã</span>
                        <span class="stat">
                                –°–æ–∑–¥–∞–Ω–∞: <span th:text="${#temporals.format(group.createdAt, 'dd.MM.yyyy')}">–¥–∞—Ç–∞</span>
                            </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div class="group-actions">
            <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è -->
            <button th:if="${group.canJoin}"
                    class="btn btn-primary">
                –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
            </button>

            <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–∫–∏–Ω—É—Ç—å -->
            <button th:if="${group.canLeave}"
                    class="btn btn-secondary">
                –ü–æ–∫–∏–Ω—É—Ç—å –≥—Ä—É–ø–ø—É
            </button>

            <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å -->
            <button th:if="${group.canManage}"
                    class="btn btn-primary">
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä—É–ø–ø—ã
            </button>

            <!-- –°—Ç–∞—Ç—É—Å—ã —É—á–∞—Å—Ç–∏—è -->
            <span th:if="${group.isMember}" class="status-badge member">
                    ‚úÖ –í—ã —É—á–∞—Å—Ç–Ω–∏–∫
                </span>

            <span th:if="${group.currentUserMembershipStatus?.name() == 'PENDING'}"
                  class="status-badge pending">
                    ‚è≥ –ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏
                </span>

            <span th:if="${group.currentUserRole?.name() == 'OWNER'}"
                  class="status-badge owner">
                    üëë –í–ª–∞–¥–µ–ª–µ—Ü
                </span>

            <span th:if="${group.currentUserRole?.name() == 'ADMIN'}"
                  class="status-badge admin">
                    ‚ö° –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                </span>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ -->
        <div class="owner-info">
            <h3>–í–ª–∞–¥–µ–ª–µ—Ü –≥—Ä—É–ø–ø—ã</h3>
            <div class="owner-card">
                <img th:if="${group.ownerImageUrl}"
                     th:src="${group.ownerImageUrl}"
                     th:alt="${group.ownerFirstName}"
                     style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                <span th:text="${group.ownerFirstName} + ' ' + ${group.ownerLastName}">
                        –ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
                    </span>
            </div>
        </div>

        <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏) -->
        <div class="group-members">
            <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
            <p>–°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–∑–∂–µ —á–µ—Ä–µ–∑ GroupMembershipService</p>
        </div>

        <!-- –ü–æ—Å—Ç—ã –≥—Ä—É–ø–ø—ã (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏) -->
        <div class="group-posts">
            <h3>–ü–æ—Å—Ç—ã –≥—Ä—É–ø–ø—ã</h3>
            <p>–ü–æ—Å—Ç—ã –≥—Ä—É–ø–ø—ã –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–∑–∂–µ</p>
        </div>
    </div>
</main>
</body>
</html>